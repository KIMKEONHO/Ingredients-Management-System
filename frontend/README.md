# ì¬ë£Œ ê´€ë¦¬ ì‹œìŠ¤í…œ (Ingredients Management System) - í”„ë¡ íŠ¸ì—”ë“œ

## ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” ì¬ë£Œ ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. Next.js 14ì™€ Reactë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆìœ¼ë©°, ì¼ë°˜ ì‚¬ìš©ìì™€ ê´€ë¦¬ìë¥¼ ìœ„í•œ ë¶„ë¦¬ëœ ì¸ì¦ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥

### ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ
- **ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸**: `/login` - ì¼ë°˜ ì‚¬ìš©ììš© ë¡œê·¸ì¸
- **ê´€ë¦¬ì ë¡œê·¸ì¸**: `/admin/login` - ê´€ë¦¬ì ì „ìš© ë¡œê·¸ì¸
- **ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (RBAC)**: ì‚¬ìš©ì ì—­í• ì— ë”°ë¥¸ í˜ì´ì§€ ì ‘ê·¼ ì œí•œ
- **ìë™ ë¦¬ë‹¤ì´ë ‰ì…˜**: ê¶Œí•œì´ ì—†ëŠ” ì‚¬ìš©ìëŠ” ì ì ˆí•œ í˜ì´ì§€ë¡œ ìë™ ì´ë™

### ğŸ›¡ï¸ ë³´ì•ˆ ê¸°ëŠ¥
- **AdminGuard**: ê´€ë¦¬ì í˜ì´ì§€ ë³´í˜¸ë¥¼ ìœ„í•œ ê³ ì°¨ ì»´í¬ë„ŒíŠ¸
- **ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦**: ë°±ì—”ë“œì—ì„œ ë°œê¸‰í•œ Access/Refresh Token ì‚¬ìš©
- **ê¶Œí•œ ê²€ì¦**: í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ì–‘ìª½ì—ì„œ ê¶Œí•œ í™•ì¸

### ğŸ“± ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- **ë°˜ì‘í˜• ë””ìì¸**: Tailwind CSSë¥¼ í™œìš©í•œ ëª¨ë˜í•œ UI
- **ì§ê´€ì ì¸ ë„¤ë¹„ê²Œì´ì…˜**: ì‚¬ìš©ì ì—­í• ì— ë”°ë¥¸ ë©”ë‰´ í‘œì‹œ
- **ë¡œë”© ìƒíƒœ í‘œì‹œ**: ì‚¬ìš©ì ê²½í—˜ í–¥ìƒì„ ìœ„í•œ ë¡œë”© ì¸ë””ì¼€ì´í„°

## ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë ˆì„ì›Œí¬**: Next.js 14 (App Router)
- **ì–¸ì–´**: TypeScript
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS
- **ìƒíƒœ ê´€ë¦¬**: Zustand (useGlobalLoginMember)
- **HTTP í´ë¼ì´ì–¸íŠ¸**: Axios
- **ë¼ìš°íŒ…**: Next.js App Router

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ admin/                 # ê´€ë¦¬ì ì „ìš© í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ login/            # ê´€ë¦¬ì ë¡œê·¸ì¸
â”‚   â”‚   â”œâ”€â”€ statistics/       # í†µê³„ ëŒ€ì‹œë³´ë“œ
â”‚   â”‚   â”œâ”€â”€ user/             # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ complaints/       # ë¶ˆë§Œì‚¬í•­ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ components/       # ê´€ë¦¬ì ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ login/                # ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸
â”‚   â”œâ”€â”€ access-denied/        # ì ‘ê·¼ ê±°ë¶€ í˜ì´ì§€
â”‚   â””â”€â”€ stores/               # ì „ì—­ ìƒíƒœ ê´€ë¦¬
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/                  # API ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ client.ts         # HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ endpoints.ts      # API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
â”‚   â”‚   â””â”€â”€ services/         # API ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ auth/                 # ì¸ì¦ ê´€ë ¨
â”‚   â”‚   â””â”€â”€ adminGuard.tsx    # ê´€ë¦¬ì ê¶Œí•œ ê°€ë“œ
â”‚   â””â”€â”€ constants/            # ìƒìˆ˜ ì •ì˜
```

## ë°±ì—”ë“œ ì—°ë™

### API ì—”ë“œí¬ì¸íŠ¸

#### ì¼ë°˜ ì‚¬ìš©ì ì¸ì¦
- `POST /users/login` - ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸
- `POST /auth/logout` - ë¡œê·¸ì•„ì›ƒ
- `GET /users/me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ

#### ê´€ë¦¬ì ì¸ì¦
- `POST /admin/login` - ê´€ë¦¬ì ë¡œê·¸ì¸
- `POST /auth/logout` - ë¡œê·¸ì•„ì›ƒ (ê³µí†µ)
- `GET /users/me` - í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ (ê³µí†µ)

### ì‘ë‹µ í˜•ì‹

ë°±ì—”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ `RsData` í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤:

```json
{
  "resultCode": "200",
  "msg": "ë¡œê·¸ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.",
  "data": "accessToken"
}
```

## ì‚¬ìš© ë°©ë²•

### 1. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm install
npm run dev
```

### 2. ê´€ë¦¬ì ë¡œê·¸ì¸

1. `/admin/login` í˜ì´ì§€ë¡œ ì´ë™
2. ê´€ë¦¬ì ê³„ì • ì •ë³´ ì…ë ¥
3. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ `/admin/statistics`ë¡œ ìë™ ì´ë™

### 3. ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸

1. `/login` í˜ì´ì§€ë¡œ ì´ë™
2. ì‚¬ìš©ì ê³„ì • ì •ë³´ ì…ë ¥
3. ë¡œê·¸ì¸ ì„±ê³µ ì‹œ í™ˆí˜ì´ì§€ë¡œ ì´ë™

## ë³´ì•ˆ ì•„í‚¤í…ì²˜

### ê¶Œí•œ ê²€ì¦ íë¦„

1. **ë¡œê·¸ì¸ ì‹œë„**: ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í¼ ì œì¶œ
2. **ë°±ì—”ë“œ ê²€ì¦**: ì„œë²„ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ í™•ì¸
3. **í† í° ë°œê¸‰**: ì¸ì¦ ì„±ê³µ ì‹œ Access/Refresh Tokenì„ ì¿ í‚¤ì— ì„¤ì •
4. **í”„ë¡ íŠ¸ì—”ë“œ ê²€ì¦**: AdminGuardì—ì„œ ì‚¬ìš©ì ì—­í•  ì¬í™•ì¸
5. **í˜ì´ì§€ ì ‘ê·¼**: ê¶Œí•œì´ ìˆëŠ” ê²½ìš°ì—ë§Œ í˜ì´ì§€ ë Œë”ë§

### AdminGuard ë™ì‘ ë°©ì‹

```typescript
// ê´€ë¦¬ì ê¶Œí•œ í™•ì¸
const userRoles = loginMember.roles || [];
const isAdmin = userRoles.some((role: string) =>
  role === 'ADMIN' || role === 'ROLE_ADMIN' || role === 'admin'
);

if (!isAdmin) {
  router.push('/access-denied');
  return;
}
```

## ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### AdminGuard

ê´€ë¦¬ì í˜ì´ì§€ë¥¼ ë³´í˜¸í•˜ëŠ” ê³ ì°¨ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.

```typescript
import AdminGuard from '@/lib/auth/adminGuard';

export default function AdminPage() {
  return (
    <AdminGuard>
      <AdminContent />
    </AdminGuard>
  );
}
```

### AuthService

ë°±ì—”ë“œ ì¸ì¦ APIì™€ í†µì‹ í•˜ëŠ” ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

```typescript
// ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸ì¸
const result = await AuthService.login({ email, password });

// ê´€ë¦¬ì ë¡œê·¸ì¸
const result = await AuthService.adminLogin({ email, password });
```

## í™˜ê²½ ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜

`.env.local` íŒŒì¼ì— ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”:

```env
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080
NEXT_PUBLIC_API_VERSION=v1
```

## ë°°í¬

### Vercel ë°°í¬

```bash
npm run build
npm run start
```

### Docker ë°°í¬

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
```

## ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

1. **ë¡œê·¸ì¸ ì‹¤íŒ¨**: ë°±ì—”ë“œ ì„œë²„ ìƒíƒœ ë° ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
2. **ê¶Œí•œ ì˜¤ë¥˜**: ì‚¬ìš©ì ì—­í•  ì„¤ì • ë° AdminGuard ë™ì‘ í™•ì¸
3. **API ì˜¤ë¥˜**: ì—”ë“œí¬ì¸íŠ¸ URL ë° ë°±ì—”ë“œ ì‘ë‹µ í˜•ì‹ í™•ì¸

### ë””ë²„ê¹…

ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ì—ì„œ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

- Network íƒ­: API ìš”ì²­/ì‘ë‹µ ìƒíƒœ
- Console íƒ­: JavaScript ì˜¤ë¥˜ ë° ë¡œê·¸
- Application íƒ­: ì¿ í‚¤ ë° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìƒíƒœ

## ê¸°ì—¬í•˜ê¸°

1. ì´ ì €ì¥ì†Œë¥¼ í¬í¬í•©ë‹ˆë‹¤
2. ìƒˆë¡œìš´ ê¸°ëŠ¥ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤ (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ì„ ì»¤ë°‹í•©ë‹ˆë‹¤ (`git commit -m 'Add some amazing feature'`)
4. ë¸Œëœì¹˜ì— í‘¸ì‹œí•©ë‹ˆë‹¤ (`git push origin feature/amazing-feature`)
5. Pull Requestë¥¼ ìƒì„±í•©ë‹ˆë‹¤

## ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤.

## ì—°ë½ì²˜

í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ìƒì„±í•´ ì£¼ì„¸ìš”.
